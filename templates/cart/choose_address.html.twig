{% extends 'base.html.twig' %}

{% block title %}Validation du panier{% endblock %}

{% block body %}
<div class="d-flex justify-content-center align-items-center">
    <div class="w-50 text-center"> {# largeur à 50% #}
        <h1>Choisir une adresse de livraison</h1>
        <br>
        <div class="mb-3 text-start">
            <h4>Récapitulatif</h4>
            <ul>
                {% for item in cartItems %}
                    <li>{{ item.product.name }} × {{ item.quantity }}</li>
                {% endfor %}
            </ul>
            <p><strong>Total :</strong> {{ total|number_format(2, ',', ' ') }} €</p>
        </div>

        {% if addresses is empty %}
            <h4>Vous devez ajouter une adresse de livraison</h4>
        {% else %}
            <form method="post" action="{{ path('app_cart_confirm') }}">
                <div class="list-group mb-3 text-start">
                    {% for address in addresses %}
                        <label class="list-group-item">
                            <input type="radio" name="address_id" value="{{ address.id }}" required>
                            {{ address.firstName }} {{ address.name }} — {{ address.address }}, {{ address.cp }} {{ address.city }} ({{ address.country }})
                        </label>
                    {% else %}
                        <div class="alert alert-info">Vous n’avez pas encore d’adresse. <a href="{{ path('app_profile_addresses') }}">Ajouter une adresse</a></div>
                    {% endfor %}
                </div>

                <button type="submit" class="btn btn-primary">Confirmer ma commande</button>
            </form>
        {% endif %}

        <br>
        <a href="{{ path('app_profile_new_address') }}" class="btn btn-primary mt-2">Nouvelle Adresse de Livraison</a>
    </div>
</div>
{% endblock %}
